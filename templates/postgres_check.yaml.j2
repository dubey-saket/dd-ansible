---
# PostgreSQL Check Configuration
# Generated by Ansible - Do not edit manually

init_config:

instances:
{% for instance in datadog_checks_merged.postgres.instances %}
  - host: "{{ instance.host | default('localhost') }}"
    port: {{ instance.port | default(5432) }}
    {% if instance.user is defined %}
    user: "{{ instance.user }}"
    {% endif %}
    {% if instance.password is defined %}
    password: "{{ instance.password }}"
    {% endif %}
    {% if instance.dbname is defined %}
    dbname: "{{ instance.dbname }}"
    {% endif %}
    {% if instance.relations is defined %}
    relations:
{% for relation in instance.relations %}
      - "{{ relation }}"
{% endfor %}
    {% endif %}
    {% if instance.custom_queries is defined %}
    custom_queries:
{% for query in instance.custom_queries %}
      - metric_prefix: "{{ query.metric_prefix }}"
        query: "{{ query.query }}"
        columns:
{% for column in query.columns %}
          - name: "{{ column.name }}"
            type: "{{ column.type }}"
{% endfor %}
{% endfor %}
    {% endif %}
    {% if instance.tags is defined %}
    tags:
{% for tag in instance.tags %}
      - "{{ tag }}"
{% endfor %}
    {% endif %}
{% endfor %}
